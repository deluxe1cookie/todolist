(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(t,e,n){},44:function(t,e,n){t.exports=n.p+"static/media/preloader.982cf99c.svg"},48:function(t,e,n){t.exports=n(77)},53:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(18),i=n.n(a),c=(n(53),n(2)),s=n(41),l=n(4),u=n(3),d=n(5),f=(n(32),n(11)),p=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).state={isEdit:!1,title:n.props.todoListTitle},n.activateEditMode=function(){n.setState({isEdit:!0})},n.deactivateEditMode=function(){n.props.changeTodolist(n.state.title),n.setState({isEdit:!1})},n.onInputChanged=function(t){n.setState({title:t.currentTarget.value})},n._handleKeyDown=function(t){"Enter"===t.key&&n.deactivateEditMode()},n.render=function(){return o.a.createElement("div",null,n.state.isEdit?o.a.createElement("input",{onBlur:n.deactivateEditMode,onChange:n.onInputChanged,autoFocus:!0,value:n.state.title,onKeyDown:n._handleKeyDown}):o.a.createElement("h3",{onClick:n.activateEditMode},n.state.title))},n}return Object(d.a)(e,t),e}(o.a.Component),m=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).state={error:!0,title:""},n.onAddItemClick=function(){n.state.error||(n.props.addItem(n.state.title),n.setState({error:!0,title:""}))},n.inputOnChange=function(t){""===t.currentTarget.value.trim()?n.setState({error:!0,title:""}):n.setState({error:!1,title:t.currentTarget.value})},n.inputOnKeyPress=function(t){"Enter"===t.key&&n.onAddItemClick(t)},n.render=function(){var t=n.state.error?"button error":"button";return o.a.createElement("div",{className:"todoList-newItemForm"},o.a.createElement("input",{className:"newItemForm-input",onKeyPress:n.inputOnKeyPress,onChange:n.inputOnChange,type:"text",placeholder:"New item name",value:n.state.title}),o.a.createElement("button",{className:t,onClick:n.onAddItemClick},"Add"))},n}return Object(d.a)(e,t),e}(o.a.Component),h=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).render=function(){return o.a.createElement("button",{className:"delete-button",onClick:n.props.delete},o.a.createElement("strong",null,"X"))},n}return Object(d.a)(e,t),e}(o.a.Component),O=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).render=function(){return o.a.createElement("div",{className:"todoList-header"},o.a.createElement("div",{className:"todoList-title"},o.a.createElement(p,{todoListTitle:n.props.todoListTitle,changeTodolist:n.props.changeTodolist}),o.a.createElement(h,{delete:n.props.deleteTodolist})),o.a.createElement(m,{addItem:n.props.addItem}))},n}return Object(d.a)(e,t),e}(o.a.Component),T=n(19),k=n(80),b="task";function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(n,!0).forEach(function(e){Object(T.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var g=function(t){var e=Object(r.useState)(!1),n=Object(f.a)(e,2),a=n[0],i=n[1],c=Object(r.useState)(t.task.title),s=Object(f.a)(c,2),l=s[0],u=s[1],d=Object(k.a)({item:{type:b,id:t.task.id,todolistId:t.todolistId,title:l},collect:function(t){return{isDragging:!!t.isDragging()}}}),p=Object(f.a)(d,2),m=(p[0],p[1]),O=function(){var e=E({},t.task,{title:l});t.changeTask(t.task.id,e),i(!1)},T=2===t.task.status,v=T?"todoList-task done":"todoList-task";return o.a.createElement("div",{className:v,ref:m},o.a.createElement("div",null,o.a.createElement("input",{type:"checkbox",onClick:function(e){var n=e.currentTarget.checked?2:0,r=E({},t.task,{status:n});t.changeTask(t.task.id,r)},defaultChecked:T}),a?o.a.createElement("input",{onBlur:O,onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,value:l,onKeyDown:function(t){"Enter"===t.key&&O()}}):o.a.createElement("span",{onClick:function(){i(!0)}},l," ",t.task.priority)),o.a.createElement(h,{delete:t.deleteTask}))},j=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).render=function(){var t=n.props.tasks.filter(function(t){switch(n.props.filterValue){case"All":return!0;case"Completed":return t.isDone;case"Active":return!t.isDone}});return t=t.map(function(t){return o.a.createElement(g,{key:t.id,task:t,changeTask:n.props.changeTask,deleteTask:function(){return n.props.deleteTask(t.id)},todolistId:n.props.todolistId})}),o.a.createElement("div",{className:"todoList-tasks"},t)},n}return Object(d.a)(e,t),e}(o.a.Component),y=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).state={isHidden:!1},n.onAllFilterClick=function(){return n.props.changeFilter("All")},n.onCompletedFilterClick=function(){return n.props.changeFilter("Completed")},n.onActiveFilterClick=function(){return n.props.changeFilter("Active")},n.onShowOrHideFiltersClick=function(){return n.setState(function(t){return{isHidden:!t.isHidden}})},n.render=function(){var t="All"===n.props.filterValue?"filter-active":"",e="Completed"===n.props.filterValue?"filter-active":"",r="Active"===n.props.filterValue?"filter-active":"";return o.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:n.onAllFilterClick,className:t},"All"),o.a.createElement("button",{onClick:n.onCompletedFilterClick,className:e},"Completed"),o.a.createElement("button",{onClick:n.onActiveFilterClick,className:r},"Active"),o.a.createElement("span",{onClick:n.onShowOrHideFiltersClick},"hide")),n.state.isHidden&&o.a.createElement("span",{onClick:n.onShowOrHideFiltersClick},"show"))},n}return Object(d.a)(e,t),e}(o.a.Component),w=n(13),C=n(17),I=n.n(C),L=n(28),S=n(29),A=n(43),D=n.n(A).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"API-KEY":"2e403f5c-5d3b-4ee4-a662-100f73be85da"}}),F=function(t){return D.get("/todo-lists/".concat(t,"/tasks"))},N=function(t,e){return D.post("/todo-lists/".concat(t,"/tasks"),{title:e})},P=function(t,e){return D.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},K=function(t){return D.delete("/todo-lists/".concat(t))},H=function(t,e,n){return D.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)},G=function(){return D.get("/todo-lists")},x=function(t){return D.post("/todo-lists",{title:t})},_=function(t,e){return D.put("/todo-lists/".concat(t),{title:e})},M=function(t,e){return D.post("auth/login",{email:t,password:e})};function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(n,!0).forEach(function(e){Object(T.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var J="TodoList/reducer/ADD-TASK",W={todolists:[],isFetching:!1},R=function(t,e){return{type:J,newTask:t,todolistId:e}},U=function(t,e){return{type:"TodoList/reducer/DELETE-TASK",todolistId:t,taskId:e}},X=function(t){return{type:"TodoList/reducer/TOGGLE_IS_FETCHING",isFetching:t}},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/reducer/SET-TODOLISTS":return B({},t,{todolists:e.todolists.map(function(t){return B({},t,{tasks:[]})})});case"TodoList/reducer/ADD-TODOLIST":var n=B({},e.newTodolist);return n.tasks=[],B({},t,{todolists:[].concat(Object(S.a)(t.todolists),[n])});case J:return B({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?B({},t,{tasks:[].concat(Object(S.a)(t.tasks),[e.newTask])}):t})});case"TodoList/reducer/CHANGE-TASK":return B({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?B({},t,{tasks:t.tasks.map(function(t){return t.id===e.taskId?B({},t,{},e.obj):t})}):t})});case"TodoList/reducer/DELETE-TODOLIST":return B({},t,{todolists:t.todolists.filter(function(t){if(t.id!==e.todolistId)return t})});case"TodoList/reducer/DELETE-TASK":return B({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?B({},t,{tasks:t.tasks.filter(function(t){if(t.id!==e.taskId)return t})}):t})});case"TodoList/reducer/SET-TASKS":return B({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?B({},t,{tasks:e.tasks}):t})});case"TodoList/reducer/CHANGE_TODOLIST":return B({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?B({},t,{title:e.newTitle}):t})});case"TodoList/reducer/TOGGLE_IS_FETCHING":return B({},t,{isFetching:e.isFetching});default:return t}},$=n(81),q=Object(w.b)(null,{addTask:function(t,e){return function(n){n(X(!0)),N(t,e).then(function(e){var r=e.data.data.item;n(R(r,t)),n(X(!1))})}},changeTask:function(t,e,n){return function(r){r(X(!0)),H(t,e,n).then(function(o){r(function(t,e,n){return{type:"TodoList/reducer/CHANGE-TASK",todolistId:t,taskId:e,obj:n}}(t,e,n)),r(X(!1))})}},deleteTodolist:function(t){return function(e){e(X(!0)),K(t).then(function(n){e(function(t){return{type:"TodoList/reducer/DELETE-TODOLIST",todolistId:t}}(t)),e(X(!1))})}},deleteTask:function(t,e){return function(n){n(X(!0)),P(t,e).then(function(r){n(U(t,e)),n(X(!1))})}},getTasks:function(t){return function(e){e(X(!0)),F(t).then(function(n){var r=n.data.items;e(function(t,e){return{type:"TodoList/reducer/SET-TASKS",tasks:t,todolistId:e}}(r,t)),e(X(!1))})}},changeTodolist:function(t,e){return function(n){n(X(!0)),_(t,e).then(function(r){n(function(t,e){return{type:"TodoList/reducer/CHANGE_TODOLIST",todolistId:t,newTitle:e}}(t,e)),n(X(!1))})}},moveTask:function(t,e,n,r){return function(){var o=Object(L.a)(I.a.mark(function o(a){var i,c;return I.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a(X(!0)),o.next=3,N(n,r);case 3:return i=o.sent,c=i.data.data.item,a(R(c,n)),o.next=8,P(e,t);case 8:a(U(e,t)),a(X(!1));case 10:case"end":return o.stop()}},o)}));return function(t){return o.apply(this,arguments)}}()}})(function(t){var e=Object(r.useState)("All"),n=Object(f.a)(e,2),a=n[0],i=n[1],c=Object($.a)({accept:b,drop:function(e){return t.moveTask(e.id,e.todolistId,t.id,e.title)},collect:function(t){return{isOver:!!t.isOver()}}}),s=Object(f.a)(c,2),l=(s[0],s[1]);Object(r.useEffect)(function(){t.getTasks(t.id)},[]);return o.a.createElement("div",{className:"todoList",ref:l},o.a.createElement(O,{addItem:function(e){t.addTask(t.id,e)},todoListTitle:t.todoListTitle,deleteTodolist:function(){return t.deleteTodolist(t.id)},changeTodolist:function(e){t.changeTodolist(t.id,e)}}),o.a.createElement(j,{changeTask:function(e,n){t.changeTask(t.id,e,n)},tasks:t.tasks,filterValue:a,deleteTask:function(e){t.deleteTask(t.id,e)},todolistId:t.id}),o.a.createElement(y,{filterValue:a,changeFilter:function(t){i(t)}}))}),z=n(46),Q=n(79),Z=n(44),tt=n.n(Z),et=function(){return o.a.createElement("img",{className:"preloader",src:tt.a,alt:""})},nt=function(t){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(a)))).render=function(){var t=n.props.todolists.map(function(t){return o.a.createElement(q,{key:t.id,id:t.id,todoListTitle:t.title,tasks:t.tasks})});return o.a.createElement(Q.a,{backend:z.a},o.a.createElement("div",{className:"App"},n.props.isFetching&&o.a.createElement(et,null),o.a.createElement(m,{addItem:n.props.addTodolist}),t))},n}return Object(d.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.props.login("free@samuraijs.com","free"),this.props.getTodolists()}}]),e}(o.a.Component),rt=Object(w.b)(function(t){return{todolists:t.todolists,isFetching:t.isFetching}},{addTodolist:function(t){return function(e){e(X(!0)),x(t).then(function(t){var n=t.data.data.item;e({type:"TodoList/reducer/ADD-TODOLIST",newTodolist:n}),e(X(!1))})}},getTodolists:function(){return function(t){t(X(!0)),G().then(function(e){t({type:"TodoList/reducer/SET-TODOLISTS",todolists:e.data}),t(X(!1))})}},login:function(t,e){return Object(L.a)(I.a.mark(function n(){return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M(t,e);case 2:case"end":return n.stop()}},n)}))}})(nt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ot=n(9),at=n(45),it=Object(ot.c)(Y,Object(ot.a)(at.a));window.store=it;var ct=it;i.a.render(o.a.createElement(w.a,{store:ct},o.a.createElement(rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.fcf7331f.chunk.js.map